{% extends "MBHHotelBundle:Flow:layout.html.twig" %}

{% set small_title = 'views.flow.hotel_flow.title'|trans({}, 'MBHHotelBundle') %}
{% set flowClass = 'MBH\\Bundle\\HotelBundle\\Form\\HotelFlow\\HotelFlow' %}

{% if flow.stepId == constant(flowClass ~ '::LOGO_STEP') %}
    {% form_theme form.logoImage '@MBHHotel/Form/hotelLogoImageTypeImageFile.html.twig' %}
{% elseif flow.stepId == constant(flowClass ~ '::MAIN_PHOTO_STEP') %}
    {% form_theme form.defaultImage '@MBHHotel/Form/hotelLogoImageTypeImageFile.html.twig' %}
{% elseif flow.stepId == constant(flowClass ~ '::HOTEL_STEP') %}
    {% form_theme form.hotel '@MBHHotel/Flow/docsListWithFlowProgressRates.html.twig' %}
{% endif %}

{% set isLastStep = flow.numberOfSteps == flow.currentStepNumber %}
{% set isImagesStep = isLastStep %}

{% block flowBody %}
    {{ form_start(form, {'attr': {'class': 'form-horizontal'}}) }}
    {{ form_widget(form) }}

    {% if isImagesStep %}
        {% include '@MBHHotel/Hotel/image-list.html.twig' with {
            images: hotel.images,
            entity: hotel,
            showMakeMainButton: false,
            showDeleteButton: true,
            redirect_url: path('mb_flow', {'type': 'hotel', 'flowId': flow.flowId})
        } %}
    {% endif %}

    {% embed '@MBHHotel/Flow/flowButtons.html.twig' %}
        {% block additionalButtons %}
            {% if flow.stepId == constant(flowClass ~ '::HOTEL_STEP') %}
                <li>
                    <button type="button" class="btn btn-success navbar-btn" id="add-hotel-button">
                        &nbsp;<i class="fa fa-plus"></i> {{ 'views.flow.hotel_flow.add_hotel.title'|trans }}
                    </button>
                </li>
            {% endif %}
        {% endblock %}
    {% endembed %}
    {{ form_end(form) }}

    {% if flow.stepId == constant(flowClass ~ '::COORDINATES_STEP') %}
        {% include '@MBHHotel/Hotel/coordinates-modal.html.twig' with {entity: hotel} %}
    {% endif %}
    {% include '@MBHBase/modalWithForm.html.twig' with {modalTitle: 'modal_with_form.add_city.title'|trans} %}
{% endblock %}