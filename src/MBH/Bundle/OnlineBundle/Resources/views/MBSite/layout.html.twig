{% extends "MBHOnlineBundle::layout.html.twig" %}

{% set management_icon = true %}
{% set title = 'menu.label.web_site'|trans({}, 'MBHBaseBundle') %}


{% set titlePaymentSystems %}
    <i class="fa fa-paperclip"></i> {{ 'menu.label.payment_systems'|trans }}
    {% if not isUsePaymentSystems %}
    <small class="label label-danger label-as-badge"><i
                class="fa fa-exclamation"></i></small>
    {% endif %}
{% endset %}

{% set layout = "tabs" %}
{% set menu = [
    {'route': 'site_settings', 'title': '<i class="fa fa-cogs"></i> '~ 'views.mb_site.index.main_settings'|trans},
    {'route': 'client_payment_systems', 'title': titlePaymentSystems},
] %}

{% set numberOfNotHotelTabs = menu|length %}
{% set active = 1 %}

{% for hotelInfo in hotelsSettings %}
    {% set iteratedHotel = hotelInfo.hotel %}
    {% if hotel is defined and hotel.id == iteratedHotel.id %}
        {% set active = loop.index + numberOfNotHotelTabs %}
    {% endif %}
    {% set hotelTitle = '<i class="fa fa-home"></i> ' ~ 'views.mb_site.index.hotel_settings.info'|trans ~ iteratedHotel.name
        ~ ' <small class="label label-danger label-as-badge">' ~ hotelInfo.numberOfWarnings ~ '</small>' %}
    {% set menu = menu|merge([
        {'route': 'site_hotel_settings', 'params': {'id': iteratedHotel.id}, 'title': hotelTitle }
    ]) %}
{% endfor %}


{% block content %}
    {% include '@MBHBase/tabs.html.twig' with {'menu': menu, 'id': 'site_settings_tabs'} %}
{% endblock %}

{% block scripts %}
    {{ parent() }}

    {% javascripts filter='uglifyjs2'
        '@MBHOnlineBundle/Resources/public/js/online/mb-site.js'
    %}
        <script type="text/javascript" src="{{ asset_url }}"></script>
    {% endjavascripts %}

{% endblock %}

{% block styles %}
    {{ parent() }}
    {% stylesheets filter='cssrewrite, uglifycss'
        '@MBHOnlineBundle/Resources/public/css/mb-site.css'
    %}
        <link rel="stylesheet" href="{{ asset_url }}"/>
    {% endstylesheets %}
{% endblock %}
